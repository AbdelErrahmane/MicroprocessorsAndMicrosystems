#pragma once

namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float votes[10] = { 0.0f };
                        float theta[28] = { 0 };
                        float sigma[28] = { 0 };
                        theta[0] = -0.268365507114; theta[1] = -0.268664294102; theta[2] = -0.083318433615; theta[3] = -0.118665258157; theta[4] = -0.383198135282; theta[5] = -0.336820806222; theta[6] = -0.092027467426; theta[7] = -0.434942905264; theta[8] = -0.478885954644; theta[9] = -0.421615261456; theta[10] = 0.926237533641; theta[11] = 0.052061995722; theta[12] = 0.000780112649; theta[13] = 0.007939983261; theta[14] = 0.012980374727; theta[15] = 0.000781206009; theta[16] = 1.09336e-06; theta[17] = 3.280081e-06; theta[18] = 0.969581620174; theta[19] = 0.029632800375; theta[20] = 0.987757096866; theta[21] = 0.012242903134; theta[22] = 0.002941686169; theta[23] = 0.000465224852; theta[24] = 0.907599018818; theta[25] = 0.088796718607; theta[26] = 5.4668e-07; theta[27] = 0.000196804873;
                        sigma[0] = 0.866070456743; sigma[1] = 0.490804240347; sigma[2] = 1.688634981112; sigma[3] = 1.54605128811; sigma[4] = 0.669833583616; sigma[5] = 0.371889930928; sigma[6] = 2.330242211884; sigma[7] = 0.900953845187; sigma[8] = 0.619498996748; sigma[9] = 0.287001159986; sigma[10] = 0.068331564914; sigma[11] = 0.049361544324; sigma[12] = 0.000789504073; sigma[13] = 0.007886939926; sigma[14] = 0.012821884599; sigma[15] = 0.000790595726; sigma[16] = 1.1093359e-05; sigma[17] = 1.328007e-05; sigma[18] = 0.029503101995; sigma[19] = 0.028764697517; sigma[20] = 0.012103014457; sigma[21] = 0.012103014457; sigma[22] = 0.002943032652; sigma[23] = 0.000475008418; sigma[24] = 0.083873039857; sigma[25] = 0.080921861371; sigma[26] = 1.054668e-05; sigma[27] = 0.000206766141;
                        votes[0] = 0.359931005565 - gauss(x, theta, sigma);
                        theta[0] = -0.284808109252; theta[1] = -0.323522496321; theta[2] = -0.212402565671; theta[3] = -0.214407114989; theta[4] = -0.642049393805; theta[5] = -0.443025977335; theta[6] = -0.275633930519; theta[7] = -0.796483522728; theta[8] = -0.524436803667; theta[9] = -0.510645584448; theta[10] = 0.998862855027; theta[11] = 0.000498051868; theta[12] = 0.0; theta[13] = 0.00041959768; theta[14] = 0.000219495425; theta[15] = 0.0; theta[16] = 0.0; theta[17] = 0.0; theta[18] = 0.999925071843; theta[19] = 7.4928157e-05; theta[20] = 0.999928597874; theta[21] = 7.1402126e-05; theta[22] = 0.0; theta[23] = 0.0; theta[24] = 0.998482043688; theta[25] = 0.001517956312; theta[26] = 0.0; theta[27] = 0.0;
                        sigma[0] = 0.707991638268; sigma[1] = 0.36911210424; sigma[2] = 0.012308880656; sigma[3] = 0.008479709869; sigma[4] = 0.106036967923; sigma[5] = 0.046355126392; sigma[6] = 0.078081894563; sigma[7] = 0.492201977454; sigma[8] = 0.078119368075; sigma[9] = 0.185312609385; sigma[10] = 0.001145851874; sigma[11] = 0.000507803812; sigma[12] = 1e-05; sigma[13] = 0.000429421618; sigma[14] = 0.000229447247; sigma[15] = 1e-05; sigma[16] = 1e-05; sigma[17] = 1e-05; sigma[18] = 8.4922543e-05; sigma[19] = 8.4922543e-05; sigma[20] = 8.1397028e-05; sigma[21] = 8.1397028e-05; sigma[22] = 1e-05; sigma[23] = 1e-05; sigma[24] = 0.001525652121; sigma[25] = 0.001525652121; sigma[26] = 1e-05; sigma[27] = 1e-05;
                        votes[1] = 0.223216595972 - gauss(x, theta, sigma);
                        theta[0] = 0.033279599497; theta[1] = -0.246410055414; theta[2] = -0.088260814651; theta[3] = -0.081865131246; theta[4] = 0.219284013788; theta[5] = 0.591680405792; theta[6] = 0.447391214133; theta[7] = 0.99369953027; theta[8] = 0.254840130844; theta[9] = 0.17121225617; theta[10] = 0.490638772497; theta[11] = 0.251884728946; theta[12] = 0.0; theta[13] = 0.003462799331; theta[14] = 0.254013699225; theta[15] = 0.0; theta[16] = 0.0; theta[17] = 0.0; theta[18] = 0.764756247151; theta[19] = 0.235243752849; theta[20] = 0.990296834632; theta[21] = 0.009703165368; theta[22] = 0.0; theta[23] = 0.0; theta[24] = 0.490636058705; theta[25] = 0.509363941295; theta[26] = 0.0; theta[27] = 0.0;
                        sigma[0] = 1.422080259389; sigma[1] = 0.538472034847; sigma[2] = 0.535361535628; sigma[3] = 0.617361407094; sigma[4] = 0.881739910603; sigma[5] = 1.49953442438; sigma[6] = 0.246489945997; sigma[7] = 0.146855516753; sigma[8] = 1.159916118781; sigma[9] = 1.067614383182; sigma[10] = 0.249922367419; sigma[11] = 0.18844881227; sigma[12] = 1e-05; sigma[13] = 0.003460808352; sigma[14] = 0.189500739832; sigma[15] = 1e-05; sigma[16] = 1e-05; sigma[17] = 1e-05; sigma[18] = 0.179914129595; sigma[19] = 0.179914129595; sigma[20] = 0.009619013949; sigma[21] = 0.009619013949; sigma[22] = 1e-05; sigma[23] = 1e-05; sigma[24] = 0.249922316606; sigma[25] = 0.249922316606; sigma[26] = 1e-05; sigma[27] = 1e-05;
                        votes[2] = 0.145012670821 - gauss(x, theta, sigma);
                        theta[0] = 0.680213859065; theta[1] = 1.401290293113; theta[2] = 0.490736605438; theta[3] = 0.548519160963; theta[4] = 1.108532637851; theta[5] = -0.022260242065; theta[6] = 0.126204773589; theta[7] = 0.740983474502; theta[8] = 1.289765621943; theta[9] = 0.763601262093; theta[10] = 0.981369825112; theta[11] = 0.014115914866; theta[12] = 0.0; theta[13] = 0.002658159677; theta[14] = 0.001856100345; theta[15] = 0.0; theta[16] = 0.0; theta[17] = 0.0; theta[18] = 0.997906740428; theta[19] = 0.002093259572; theta[20] = 0.988298497827; theta[21] = 0.011701502173; theta[22] = 0.0; theta[23] = 0.0; theta[24] = 0.981369825112; theta[25] = 0.018630174888; theta[26] = 0.0; theta[27] = 0.0;
                        sigma[0] = 0.183374356672; sigma[1] = 1.31580000648; sigma[2] = 0.819641762187; sigma[3] = 0.939862050206; sigma[4] = 0.132834275217; sigma[5] = 0.83322335201; sigma[6] = 0.02754219974; sigma[7] = 0.071644444621; sigma[8] = 0.16509230479; sigma[9] = 0.311411389071; sigma[10] = 0.018293091472; sigma[11] = 0.013926655814; sigma[12] = 1e-05; sigma[13] = 0.002661093864; sigma[14] = 0.001862655236; sigma[15] = 1e-05; sigma[16] = 1e-05; sigma[17] = 1e-05; sigma[18] = 0.002098877837; sigma[19] = 0.002098877837; sigma[20] = 0.01157457702; sigma[21] = 0.01157457702; sigma[22] = 1e-05; sigma[23] = 1e-05; sigma[24] = 0.018293091472; sigma[25] = 0.018293091472; sigma[26] = 1e-05; sigma[27] = 1e-05;
                        votes[3] = 0.119474458541 - gauss(x, theta, sigma);
                        theta[0] = 1.127016028243; theta[1] = 0.581802953168; theta[2] = 0.491602722049; theta[3] = 0.551734454743; theta[4] = 1.064951097651; theta[5] = 1.476005207004; theta[6] = -0.228744089356; theta[7] = 0.452433776195; theta[8] = 1.211902898573; theta[9] = 1.853450252711; theta[10] = 0.997541075866; theta[11] = 0.001841307039; theta[12] = 0.0; theta[13] = 8.9467897e-05; theta[14] = 0.000528149198; theta[15] = 0.0; theta[16] = 0.0; theta[17] = 0.0; theta[18] = 0.971422222094; theta[19] = 0.028577777906; theta[20] = 0.873426014378; theta[21] = 0.126573985622; theta[22] = 0.0; theta[23] = 0.0; theta[24] = 0.997541075866; theta[25] = 0.002458924134; theta[26] = 0.0; theta[27] = 0.0;
                        sigma[0] = 0.155850633841; sigma[1] = 1.607824796026; sigma[2] = 1.187216051847; sigma[3] = 1.393235837819; sigma[4] = 0.200790240652; sigma[5] = 1.46240701037; sigma[6] = 0.108667891919; sigma[7] = 0.124018133531; sigma[8] = 0.312607230022; sigma[9] = 1.779691074664; sigma[10] = 0.002462877826; sigma[11] = 0.001847916628; sigma[12] = 1e-05; sigma[13] = 9.9459892e-05; sigma[14] = 0.000537870256; sigma[15] = 1e-05; sigma[16] = 1e-05; sigma[17] = 1e-05; sigma[18] = 0.027771088516; sigma[19] = 0.027771088516; sigma[20] = 0.110563011786; sigma[21] = 0.110563011786; sigma[22] = 1e-05; sigma[23] = 1e-05; sigma[24] = 0.002462877826; sigma[25] = 0.002462877826; sigma[26] = 1e-05; sigma[27] = 1e-05;
                        votes[4] = 0.068178441836 - gauss(x, theta, sigma);
                        theta[0] = -1.010188691051; theta[1] = -0.454043578229; theta[2] = -0.215199050601; theta[3] = -0.215883987173; theta[4] = -0.05548241495; theta[5] = -0.416682393875; theta[6] = 0.70063697679; theta[7] = 1.002789801961; theta[8] = -0.775502648608; theta[9] = -0.574282288877; theta[10] = 0.144519516007; theta[11] = 0.796628330261; theta[12] = 0.0; theta[13] = 0.022941016835; theta[14] = 0.035911136897; theta[15] = 0.0; theta[16] = 0.0; theta[17] = 0.0; theta[18] = 0.9635928917; theta[19] = 0.0364071083; theta[20] = 1.0; theta[21] = 0.0; theta[22] = 0.0; theta[23] = 0.0; theta[24] = 0.144519516007; theta[25] = 0.855480483993; theta[26] = 0.0; theta[27] = 0.0;
                        sigma[0] = 0.199193293779; sigma[1] = 0.05530198444; sigma[2] = 0.000210298248; sigma[3] = 0.000202237241; sigma[4] = 3.272477614858; sigma[5] = 0.005583578229; sigma[6] = 0.305928937834; sigma[7] = 0.717721953576; sigma[8] = 0.003914417188; sigma[9] = 0.002413824054; sigma[10] = 0.1236436255; sigma[11] = 0.162021633686; sigma[12] = 1e-05; sigma[13] = 0.022424726581; sigma[14] = 0.034631527144; sigma[15] = 1e-05; sigma[16] = 1e-05; sigma[17] = 1e-05; sigma[18] = 0.035091630765; sigma[19] = 0.035091630765; sigma[20] = 1e-05; sigma[21] = 1e-05; sigma[22] = 1e-05; sigma[23] = 1e-05; sigma[24] = 0.1236436255; sigma[25] = 0.1236436255; sigma[26] = 1e-05; sigma[27] = 1e-05;
                        votes[5] = 0.0420534699 - gauss(x, theta, sigma);
                        theta[0] = 0.965804061133; theta[1] = 0.425530730959; theta[2] = 0.180037736981; theta[3] = 0.212796990585; theta[4] = 1.075308148329; theta[5] = 1.334951391306; theta[6] = 0.022642946405; theta[7] = 0.684899478603; theta[8] = 1.201805173223; theta[9] = 1.192550465681; theta[10] = 0.948629437676; theta[11] = 0.039731235597; theta[12] = 0.0; theta[13] = 0.000330607443; theta[14] = 0.011308719285; theta[15] = 0.0; theta[16] = 0.0; theta[17] = 0.0; theta[18] = 0.843831740259; theta[19] = 0.156168259741; theta[20] = 0.980114934705; theta[21] = 0.019885065295; theta[22] = 0.0; theta[23] = 0.0; theta[24] = 0.948624575801; theta[25] = 0.051375424199; theta[26] = 0.0; theta[27] = 0.0;
                        sigma[0] = 0.361873867642; sigma[1] = 1.511117217485; sigma[2] = 1.031265882149; sigma[3] = 1.204578946783; sigma[4] = 0.183590166822; sigma[5] = 1.830939724806; sigma[6] = 0.157879691276; sigma[7] = 0.065330086343; sigma[8] = 0.332515477175; sigma[9] = 0.976575222759; sigma[10] = 0.048741627651; sigma[11] = 0.038162664515; sigma[12] = 1e-05; sigma[13] = 0.000340498141; sigma[14] = 0.011190832153; sigma[15] = 1e-05; sigma[16] = 1e-05; sigma[17] = 1e-05; sigma[18] = 0.131789734391; sigma[19] = 0.131789734391; sigma[20] = 0.019499649473; sigma[21] = 0.019499649473; sigma[22] = 1e-05; sigma[23] = 1e-05; sigma[24] = 0.048745989987; sigma[25] = 0.048745989987; sigma[26] = 1e-05; sigma[27] = 1e-05;
                        votes[6] = 0.040471461974 - gauss(x, theta, sigma);
                        theta[0] = 0.800887987371; theta[1] = -0.43227864869; theta[2] = -0.212326280477; theta[3] = -0.212669953731; theta[4] = 3.019260323807; theta[5] = -0.445778739913; theta[6] = -0.48880868674; theta[7] = 0.313128755455; theta[8] = -0.175043370408; theta[9] = -0.56360391186; theta[10] = 0.997425742574; theta[11] = 0.001584158416; theta[12] = 0.0; theta[13] = 0.0; theta[14] = 0.00099009901; theta[15] = 0.0; theta[16] = 0.0; theta[17] = 0.0; theta[18] = 0.993267326733; theta[19] = 0.006732673267; theta[20] = 0.999801980198; theta[21] = 0.000198019802; theta[22] = 0.0; theta[23] = 0.0; theta[24] = 0.991089108911; theta[25] = 0.008910891089; theta[26] = 0.0; theta[27] = 0.0;
                        sigma[0] = 0.0358605012; sigma[1] = 0.109998661543; sigma[2] = 0.004877421781; sigma[3] = 0.005705185268; sigma[4] = 0.132725625597; sigma[5] = 0.03790657145; sigma[6] = 0.026996484481; sigma[7] = 0.015062782998; sigma[8] = 0.042696269707; sigma[9] = 0.036876890413; sigma[10] = 0.002577630624; sigma[11] = 0.001591648858; sigma[12] = 1e-05; sigma[13] = 1e-05; sigma[14] = 0.000999118714; sigma[15] = 1e-05; sigma[16] = 1e-05; sigma[17] = 1e-05; sigma[18] = 0.006697344378; sigma[19] = 0.006697344378; sigma[20] = 0.00020798059; sigma[21] = 0.00020798059; sigma[22] = 1e-05; sigma[23] = 1e-05; sigma[24] = 0.008841487109; sigma[25] = 0.008841487109; sigma[26] = 1e-05; sigma[27] = 1e-05;
                        votes[7] = 0.000993674133 - gauss(x, theta, sigma);
                        theta[0] = -0.997183348884; theta[1] = -0.194939889591; theta[2] = 0.13523297903; theta[3] = 0.011082162533; theta[4] = -0.050282996364; theta[5] = -0.161053638425; theta[6] = 0.892959584562; theta[7] = 1.278821243268; theta[8] = -0.682337147901; theta[9] = -0.475515041324; theta[10] = 0.057830308147; theta[11] = 0.678345293373; theta[12] = 0.0; theta[13] = 0.026593499367; theta[14] = 0.237230899114; theta[15] = 0.0; theta[16] = 0.0; theta[17] = 0.0; theta[18] = 0.942591810891; theta[19] = 0.057408189109; theta[20] = 0.997467285775; theta[21] = 0.002532714225; theta[22] = 0.0; theta[23] = 0.0; theta[24] = 0.056986070072; theta[25] = 0.943013929928; theta[26] = 0.0; theta[27] = 0.0;
                        sigma[0] = 0.316686179195; sigma[1] = 0.644852171691; sigma[2] = 62.09361592115; sigma[3] = 41.240279265122; sigma[4] = 0.798157089499; sigma[5] = 0.309303533404; sigma[6] = 0.933269015265; sigma[7] = 0.196790084607; sigma[8] = 0.217824913529; sigma[9] = 0.253208007786; sigma[10] = 0.054495963607; sigma[11] = 0.218202956332; sigma[12] = 1e-05; sigma[13] = 0.025896285158; sigma[14] = 0.180962399619; sigma[15] = 1e-05; sigma[16] = 1e-05; sigma[17] = 1e-05; sigma[18] = 0.054122488933; sigma[19] = 0.054122488933; sigma[20] = 0.002536299584; sigma[21] = 0.002536299584; sigma[22] = 1e-05; sigma[23] = 1e-05; sigma[24] = 0.05374865789; sigma[25] = 0.05374865789; sigma[26] = 1e-05; sigma[27] = 1e-05;
                        votes[8] = 0.00046614139 - gauss(x, theta, sigma);
                        theta[0] = 1.474985030513; theta[1] = -0.214602667193; theta[2] = -0.179009709465; theta[3] = -0.177096229241; theta[4] = 1.144002991377; theta[5] = 1.797210061315; theta[6] = -0.107668805097; theta[7] = 0.331514239134; theta[8] = 1.088279039561; theta[9] = -0.094873415142; theta[10] = 1.0; theta[11] = 0.0; theta[12] = 0.0; theta[13] = 0.0; theta[14] = 0.0; theta[15] = 0.0; theta[16] = 0.0; theta[17] = 0.0; theta[18] = 0.997078870497; theta[19] = 0.002921129503; theta[20] = 0.910418695229; theta[21] = 0.089581304771; theta[22] = 0.0; theta[23] = 0.0; theta[24] = 0.997078870497; theta[25] = 0.002921129503; theta[26] = 0.0; theta[27] = 0.0;
                        sigma[0] = 0.081405562861; sigma[1] = 0.604905398395; sigma[2] = 0.027705536314; sigma[3] = 0.03233640115; sigma[4] = 0.20151408404; sigma[5] = 1.455102283303; sigma[6] = 9.477589207297; sigma[7] = 0.103601235612; sigma[8] = 0.616064791641; sigma[9] = 0.206823091994; sigma[10] = 1e-05; sigma[11] = 1e-05; sigma[12] = 1e-05; sigma[13] = 1e-05; sigma[14] = 1e-05; sigma[15] = 1e-05; sigma[16] = 1e-05; sigma[17] = 1e-05; sigma[18] = 0.002922596506; sigma[19] = 0.002922596506; sigma[20] = 0.081566494607; sigma[21] = 0.081566494607; sigma[22] = 1e-05; sigma[23] = 1e-05; sigma[24] = 0.002922596506; sigma[25] = 0.002922596506; sigma[26] = 1e-05; sigma[27] = 1e-05;
                        votes[9] = 0.000202079868 - gauss(x, theta, sigma);
                        // return argmax of votes
                        uint8_t classIdx = 0;
                        float maxVotes = votes[0];

                        for (uint8_t i = 1; i < 10; i++) {
                            if (votes[i] > maxVotes) {
                                classIdx = i;
                                maxVotes = votes[i];
                            }
                        }

                        return classIdx;
                    }

                protected:
                    /**
                    * Compute gaussian value
                    */
                    float gauss(float *x, float *theta, float *sigma) {
                        float gauss = 0.0f;

                        for (uint16_t i = 0; i < 28; i++) {
                            gauss += log(sigma[i]);
                            gauss += abs(x[i] - theta[i]) / sigma[i];
                        }

                        return gauss;
                    }
                };
            }
        }
    }
